import{c as o,j as r,r as n}from"./index-EVxSWqbh.js";import{L as l}from"./LoadingIndicator-Dhq8nlgA.js";import{d as i}from"./db-1x1IjQK2.js";function a(e){return`${o.s3BucketUrl}/covers/${e}`}function u({link:e}){const t=e.web_url?r.jsx("a",{href:e.web_url,target:"_blank",rel:"noopener noreferrer",className:"link",children:e.resource_title}):r.jsx("span",{children:e.resource_title});return r.jsxs("div",{className:"mb-8 flex flex-col items-center bg-white p-6 rounded-lg shadow-md w-96",children:[r.jsx("h3",{children:t}),e.cover?r.jsx("img",{className:"mt-4",alt:`${e.resource_title} cover`,src:a(e.cover)}):null,r.jsx("div",{className:"mt-4",dangerouslySetInnerHTML:{__html:e.description}}),r.jsxs("div",{className:"mt-2",children:[e.misc_url&&e.misc_text?r.jsx("div",{children:r.jsx("a",{href:e.misc_url,target:"_blank",rel:"noopener noreferrer",className:"link",children:e.misc_text})}):null,e.worldcat_url?r.jsx("div",{children:r.jsx("a",{href:e.worldcat_url,target:"_blank",rel:"noopener noreferrer",className:"link",children:"Find in a library"})}):null,e.amazon_url?r.jsx("div",{children:r.jsx("a",{href:e.amazon_url,target:"_blank",rel:"noopener noreferrer",className:"link",children:"Buy on Amazon"})}):null]})]},e.resource_id)}const d={async fetchLinks(){const e=i.prepare("SELECT * FROM resources ORDER BY resource_title"),t=[];for(;e.step();){const s=e.getAsObject();t.push({resource_id:s.resource_id,title_id:s.title_id,resource_title:s.resource_title,cover:s.cover,relation:s.relation,web_url:s.web_url,worldcat_url:s.worldcat_url,amazon_url:s.amazon_url,misc_url:s.misc_url,misc_text:s.misc_text,description:s.description})}return e.free(),t}};function m(){const[e,t]=n.useState([]);return n.useEffect(()=>{async function s(){const c=await d.fetchLinks();t(c)}s()},[]),e}function _(){const e=m();return r.jsxs("div",{children:[r.jsx("h2",{className:"text-center",children:"Books & Links"}),r.jsx("div",{className:"flex flex-col items-center",children:e?e.map(t=>r.jsx(u,{link:t},t.resource_id)):r.jsx(l,{})})]})}function j(){return r.jsx(_,{})}export{j as component};
